!function(){angular.module("serenader",["ngRoute","ngAnimate","appModule"]).controller("signController",["$rootScope",function(a){a.sign={}}]).controller("signInController",["$scope","$rootScope","postSignIn","$window",function(a,b,c,d){var e=b.sign.signIn={};a.redirect=function(){var a={};if(d.location.search){var b=d.location.search,c=b.split("?")[1].split("&");angular.forEach(c,function(b){var c=b.split("=");a[c[0]]=c[1]})}window.location=a.url||url.admin},a.signIn=function(){return a.username&&a.password?(e.pending=!0,void c(a.username,a.password).success(function(a){e.pending=!1,0===a.ret?e.success=!0:(e.error=!0,e.message=a.error,e.success=!1)}).error(function(){e.success=!1,e.pending=!1,e.error=!0,e.message="网络错误，请求失败！"})):(alert("请完善表单内容！"),!1)}}]).controller("signUpController",["$scope","$rootScope","postSignUp",function(a,b,c){var d=b.sign.signUp={};a.redirect=function(){window.location.hash="#/signin"},a.signUp=function(){return a.username&&a.email&&a.password&&a.repwd?(d.pending=!0,void c({username:a.username,email:a.email,password:a.password,rePwd:a.repwd}).success(function(a){d.pending=!1,0===a.ret?d.success=!0:(d.success=!1,d.error=!0,d.message=a.error)}).error(function(){d.pending=!1,d.success=!1,d.error=!0,d.message="网络错误，请求失败！"})):(alert("请完善表单内容！"),!1)}}]).config(["$routeProvider",function(a){console.log(a),a.when("/signin",{templateUrl:assets.server+"/views/signin.html",controller:"signInController"}).when("/signup",{templateUrl:assets.server+"/views/signup.html",controller:"signUpController"}).otherwise({redirectTo:"/signin"})}])}(),function(){angular.module("appModule",[])}(),function(){var a=/^[a-zA-Z0-9]+$/i,b=/^[a-zA-Z]+$/i,c=/^-?[0-9]+$/i,d=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;angular.module("appModule").directive("mdInput",function(){return{restrict:"AE",templateUrl:assets.server+"/app/template/input.html",scope:{name:"@",type:"@",title:"@",desc:"@",rePwd:"@"},transclude:!0,require:"ngModel",link:function(e,f,g,h){var i=f.find("input");i.val(g.value),e.hasDesc=g.desc,e.isFocus=!1,e.hasValue=function(){return i.val()},e.isError=function(){return h.$invalid},i.on("focus",function(){e.isFocus=!0,e.$apply()}).on("blur",function(){e.isFocus=!1,e.$apply(),e.$apply(function(){h.$setViewValue(i.val())})}).on("keyup",function(){e.$apply(function(){h.$setViewValue(i.val())})}),h.$validators.min=function(a,b){var c=a||b;return g.min&&c?Number(c)>=Number(g.min):!0},h.$validators.max=function(a,b){var c=a||b;return g.max&&c?Number(c)<=Number(g.max):!0},h.$validators.minLength=function(a,b){var c=a||b;return g.minLength&&c?c.length>=Number(g.minLength):!0},h.$validators.maxLength=function(a,b){var c=a||b;return g.maxLength&&c?c.length<=Number(g.maxLength):!0},h.$validators.alphanumeric=function(b,c){var d=b||c;return g.alphanumeric&&d?a.test(d):!0},h.$validators.alpha=function(a,c){var d=a||c;return g.alpha&&d?b.test(d):!0},h.$validators.numeric=function(a,b){var d=a||b;return g.numeric&&d?c.test(d):!0},h.$validators.email=function(a,b){var c=a||b;return"email"===g.type&&c?d.test(c):!0},h.$validators.rePwd=function(a,b){var c=a||b;return g.rePwd?c===g.rePwd:!0},h.$render=function(){i.val(h.$viewVlaue)},h.$setViewValue(i.val())}}})}(),function(){angular.module("appModule").directive("pgress",function(){return{restrict:"E",transclude:!0,templateUrl:assets.server+"/app/template/progress.html",controller:["$scope","$rootScope","$attrs",function(a,b,c){a.close=function(){var a,d=c.ngShow,e=b;if(-1!==d.indexOf(".")){var f=d.split(".");a=f.splice(f.length-1,1)[0],angular.forEach(f,function(a){e=e[a]})}else a=c.ngShow;var g=!!e[a];e[a]=!g}}]}})}(),function(){angular.module("appModule").directive("msgBox",function(){return{restrict:"AE",transclude:!0,scope:{callback:"&",type:"@"},templateUrl:assets.server+"/app/template/msg-box.html",controller:["$scope","$rootScope","$attrs",function(a,b,c){c.callback||(a.callback=function(){var a,d=c.ngShow,e=b;if(-1!==d.indexOf(".")){var f=d.split(".");a=f.splice(f.length-1,1),angular.forEach(f,function(a){e=e[a]})}else a=c.ngShow;var g=!!e[a];e[a]=!g})}]}})}(),angular.module("appModule").factory("postSignIn",["$http",function(a){return function(b,c){return a.post(url.admin+url.signIn,{username:b,password:c})}}]).factory("postSignUp",["$http",function(a){return function(b){return a.post(url.admin+url.signUp,{username:b.username,password:b.password,email:b.email,rePwd:b.rePwd})}}]);